import{a as p,F as I,W as y,n as H,e as A,m as d,_ as l,d as k}from"./q-4e2a80fc.js";const D=e=>{const[t]=p();(e.key===" "||e.key==="Spacebar")&&(t.value=!0)},x=()=>{I(d(()=>l(()=>Promise.resolve().then(()=>g),void 0),"s_2xVXU2KOPco"));const e=y(),t=y(!1);return H(d(()=>l(()=>Promise.resolve().then(()=>g),void 0),"s_0hmpYjMNbfE",[{canvasWidth:0,canvasHeight:0,videoWidth:0,videoHeight:0,insectsInDangerZone:0},e,t])),A("canvas",{ref:e},{onClick$:d(()=>l(()=>Promise.resolve().then(()=>g),void 0),"s_NVZWRLLg3NA",[t]),"preventdefault:keydown":!0,"window:onKeyDown$":d(()=>l(()=>Promise.resolve().then(()=>g),void 0),"s_W89l20rR9Uw",[t])},null,3,"S1_0")},F=`canvas{width:100%;margin:0;padding:0;box-shadow:#000 0 20px 10px 10px}
`,b=F,E=()=>{const[e]=p();e.value=!0},R="/build/q-465f4d70.png";class O{constructor(t,i){this.x=i,this.y=t,this.image=new Image,this.image.src=R,this.spriteHeight=309,this.spriteWidth=550,this.frame=0,this.timer=0,this.width=i*.1,this.height=i*.07,this.inDanger=!1}draw(t){this.timer++,this.timer%30===0&&this.frame++,this.frame>1&&(this.frame=0),t.drawImage(this.image,this.frame*this.spriteWidth,0,this.spriteWidth,this.spriteHeight,this.x,this.y,this.width,this.height)}update(){this.x+=-2}}const N="/build/q-21f32a3c.png";class j{constructor(t,i,a,s){this.x=t,this.y=i,this.image=new Image,this.image.src=N,this.spriteWidth=400,this.spriteHeight=321,this.frame=0,this.yFrame=0,this.timer=0,this.isAttacking=!1,this.canvasHeight=a,this.canvasWidth=s}insectAppears(){this.yFrame===1&&this.frame>9&&(this.yFrame=0&(this.frame=0)),this.yFrame===3&&this.frame>9&&(this.yFrame=0&(this.frame=0)),this.yFrame===2&&this.frame>9&&(this.yFrame=0&(this.frame=0)),this.frame>9&&(this.frame=0,this.yFrame+=1)}attack(t){t>0?this.yFrame=3:this.yFrame=2,this.frame=0}draw(t,i,a){this.timer++,t.save(),t.translate(i/2,a/2),t.drawImage(this.image,this.spriteWidth*this.frame,this.spriteHeight*this.yFrame+1,this.spriteWidth,this.spriteHeight,-this.spriteWidth*this.canvasHeight*75e-5,-this.spriteHeight*this.canvasHeight*75e-5,this.spriteWidth*this.canvasHeight*.0015,this.spriteHeight*this.canvasHeight*.0015),this.timer%20===0&&this.frame++,this.frame>9&&this.yFrame>1&&(this.isAttacking=!1),t.restore()}reset(){this.frame=0,this.yFrame=0}}const P=(e,t,i,a,s,h)=>{e.drawImage(t,0,0,i,a,0,0,s,h)};function w(e,t){return Math.random()*(t-e)+e}const V=(e,t,i,a)=>{e<0||e>0&&(t.fillStyle="black",t.globalAlpha=e*1e-4,t.fillRect(0,0,i,a))},Z=({track:e})=>{const[t,i,a]=p();if(e(()=>{i.value}),!i.value)return;t.canvasHeight=i.value.clientWidth/1.777777777,t.canvasWidth=i.value.clientWidth;const s=i.value.getContext("2d");if(s&&(s.canvas.width=t.canvasWidth),s&&(s.canvas.height=t.canvasHeight),!s)return;const h=new j(0,0,s.canvas.width,s.canvas.height),o=[],m={x1:t.canvasWidth/2-30,x2:t.canvasWidth/2+30};let f=w(0,625);const r=document.createElement("video");r.src="https://ulcxpfjjujtdnmvvzzuz.supabase.co/storage/v1/object/sign/video/bg-video2.mp4?token=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJ1cmwiOiJ2aWRlby9iZy12aWRlbzIubXA0IiwiaWF0IjoxNjk1NDEyMjU1LCJleHAiOjE3MjY5NDgyNTV9.tpyBQlEF0ViZDnuNKN5U_6OEx7iEwo0RInpkzkGp3cs&t=2023-09-22T19%3A50%3A55.241Z";let c=!1,v=1e4;function _(){s&&(s.clearRect(0,0,t.canvasWidth,t.canvasHeight),P(s,r,t.videoWidth,t.videoHeight,t.canvasWidth,t.canvasHeight),v>0&&(v+=-1),V(v,s,t.canvasWidth,t.canvasHeight),f+=-1,h.draw(s,t.canvasWidth,t.canvasHeight),o.length>0&&h.insectAppears(),o.length===0&&!h.isAttacking&&h.reset(),a.value&&c===!1&&(c=!0,h.isAttacking=!0,h.attack(t.insectsInDangerZone)),!h.isAttacking&&c&&(c=!1),o.forEach((n,u)=>{n.draw(s),n.update();const W=n.x+35<m.x1;n.x<-70&&o.splice(u,u),n.inDanger===!0&&a.value&&(o.splice(u,1),t.insectsInDangerZone+=-1,a.value=!1),n.x+35<m.x2&&n.x+35>m.x1&&n.inDanger===!1?(t.insectsInDangerZone+=1,n.inDanger=!0):W&&n.inDanger&&(t.insectsInDangerZone+=-1,n.inDanger=!1)}),f<0&&(o.push(new O(t.canvasHeight/2-30,t.canvasWidth)),f=Number(w(0,625))),requestAnimationFrame(_))}r.addEventListener("loadedmetadata",()=>{t.videoWidth=r.videoWidth,t.videoHeight=r.videoHeight,r.autoplay=!0,r.muted=!0,r.loop=!0,_(),r.play()})},g=Object.freeze(Object.defineProperty({__proto__:null,_hW:k,s_0hmpYjMNbfE:Z,s_2xVXU2KOPco:b,s_NVZWRLLg3NA:E,s_W89l20rR9Uw:D,s_ykclDrFoToI:x},Symbol.toStringTag,{value:"Module"}));export{k as _hW,Z as s_0hmpYjMNbfE,b as s_2xVXU2KOPco,E as s_NVZWRLLg3NA,D as s_W89l20rR9Uw,x as s_ykclDrFoToI};
